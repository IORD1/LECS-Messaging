<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Faker/3.1.0/faker.min.js"
    integrity="sha512-/seDHxVfh1NvFUscAj8GsHQVZJvr2jjAoYsNL7As2FCaFHUHYIarl3sRCvVlFgyouVNiRgHIebyLKjpgd1SLDw=="
    crossorigin="anonymous"></script>



</head>

<body>

  <h1>My Awesome App ðŸ”¥</h1>
  <section id="whenSignedOut">

    <button id="googleBtn" class="btn btn-pri                                                                                      mary">Sign in with Google</button>

  </section>

  <section id="whenSignedIn" hidden="true">

    <div id="userDetails"></div>

    <button id="signOutBtn" class="btn btn-primary" onclick="func()">Sign Out</button>

  </section>


  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithRedirect,
      getRedirectResult,
      signInWithPopup,
      signOut
    } from "https://www.gstatic.com/firebasejs/9.6.9/firebase-auth.js";


    const firebaseConfig = {
      apiKey: "AIzaSyAbEc5jQBHJ22W0Oe69Foh_kXH9iSGaf38",
      authDomain: "lecs-messaging.firebaseapp.com",
      projectId: "lecs-messaging",
      storageBucket: "lecs-messaging.appspot.com",
      messagingSenderId: "539453436104",
      appId: "1:539453436104:web:e0a5a4e793f40b04f4f5fd"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const provider = new GoogleAuthProvider(app);
    const auth = getAuth(app);

    googleBtn.addEventListener('click', (e) => {


      signInWithPopup(auth, provider)
        .then((result) => {
          // This gives you a Google Access Token. You can use it to access the Google API.
          const credential = GoogleAuthProvider.credentialFromResult(result);
          const token = credential.accessToken;
          // The signed-in user info.
          const user = result.user;
          // name = displayName
          // email = email
          // photo = photoURL

          alert(user.displayName);
          // ...
        }).catch((error) => {
          // Handle Errors here.
          const errorCode = error.code;
          const errorMessage = error.message;
          // The email of the user's account used.
          const email = error.email;
          // The AuthCredential type that was used.
          const credential = GoogleAuthProvider.credentialFromError(error);
          // ...
          alert(errorMessage);
        });
    });

    auth.onAuthStateChanged(user => {
      if (user) {
        // signed in
        whenSignedIn.hidden = false;
        whenSignedOut.hidden = true;
        userDetails.innerHTML = `<h3>Hello ${user.displayName}!</h3> <p>User ID: ${user.uid}</p>`;
      } else {
        // not signed in
        whenSignedIn.hidden = true;
        whenSignedOut.hidden = false;
        userDetails.innerHTML = '';
      }
    });

    function func(){
      alert();
    }
    signOutBtn.onclick = () => auth.signOut();

  </script>
  <script src="app.js" defer></script>

</body>

</html>